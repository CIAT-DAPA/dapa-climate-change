#Julian Ramirez-Villegas#University of Leeds#October 27, 2010require(raster)md <- "G:/climate_change/IPCC_CMIP3/20C3M/original-data/"ml <- list.files(md)for (gcm in ml) {	#directories	gd <- paste(md, "/", gcm, "/multiyr_avgs/1961_1990", sep="")	od <- "C:/Workspace/PhD-work/cru-wcl-gcm-comparison/gcm-data"; if (!file.exists(od)) {dir.create(od)}	od <- paste(od, "/20C3M", sep=""); if (!file.exists(od)) {dir.create(od)}	od <- paste(od, "/1961_1990", sep=""); if (!file.exists(od)) {dir.create(od)}	god <- paste(od, "/", gcm, sep=""); if (!file.exists(god)) {dir.create(god)}	for (m in 1:12) {		cat("Month", m, "\n")		if (m < 10) {mth <- paste(0, m, sep="")} else {mth <- m}		#Precipitation		rs <- raster(paste(gd, "/prec_", mth, ".asc", sep=""))		rs <- writeRaster(rs, paste(god, "/prec_", mth, ".asc", sep=""), format='ascii', overwrite=T)		rm(rs)		#Mean temp		rs <- raster(paste(gd, "/tmean_", mth, ".asc", sep=""))		rs <- writeRaster(rs, paste(god, "/tmean_", mth, ".asc", sep=""), format='ascii', overwrite=T)		rm(rs)		#Temperature range if input data exists		if (file.exists(paste(gd, "/tmin_", mth, ".asc", sep="")) & file.exists(paste(gd, "/tmax_", mth, ".asc", sep=""))) {			tn <- raster(paste(gd, "/tmin_", mth, ".asc", sep=""))			tx <- raster(paste(gd, "/tmax_", mth, ".asc", sep=""))			rs <- tx - tn			rs <- writeRaster(rs, paste(god, "/dtr_", mth, ".asc", sep=""), format='ascii', overwrite=T)			rm(rs)			rm(tn)			rm(tx)		}	}}